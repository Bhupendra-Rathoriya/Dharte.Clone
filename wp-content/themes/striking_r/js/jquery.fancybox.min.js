/*!
 * fancybx - jQuery Plugin
 * version: 2.1.5 (Fri, 14 Jun 2013)
 * @requires jQuery v1.6 or later
 *
 * Examples at http://fancyapps.com/fancybx/
 * License: www.fancyapps.com/fancybx/#license
 *
 * Copyright 2012 Janis Skarnelis - janis@fancyapps.com
 *
 */
! function(n, i, j, d) {
    "use strict";

    function f(e) {
        return e && e.hasOwnProperty && e instanceof j
    }

    function h(e) {
        return e && "string" == typeof e
    }

    function M(e) {
        return h(e) && 0 < e.indexOf("%")
    }

    function A(e, t) {
        var n = parseInt(e, 10) || 0;
        return t && M(e) && (n = D.getViewport()[t] / 100 * n), Math.ceil(n)
    }

    function I(e, t) {
        return A(e, t) + "px"
    }
    var o = j("html"),
        a = j(n),
        c = j(i),
        D = j.fancybx = function() {
            D.open.apply(this, arguments)
        },
        r = navigator.userAgent.match(/msie/i),
        l = null,
        p = i.createTouch !== d;
    j.extend(D, {
        version: "2.1.5",
        defaults: {
            padding: 15,
            margin: 20,
            width: 800,
            height: 600,
            minWidth: 100,
            minHeight: 100,
            maxWidth: 9999,
            maxHeight: 9999,
            pixelRatio: 1,
            autoSize: !0,
            autoHeight: !1,
            autoWidth: !1,
            autoResize: !0,
            autoCenter: !p,
            fitToView: !0,
            forceWHSet: !1,
            aspectRatio: !1,
            topRatio: .5,
            leftRatio: .5,
            scrolling: "auto",
            wrapCSS: "",
            arrows: !0,
            closeBtn: !0,
            closeClick: !1,
            nextClick: !1,
            mouseWheel: !0,
            autoPlay: !1,
            playSpeed: 3e3,
            preload: 3,
            modal: !1,
            loop: !0,
            ajax: {
                dataType: "html",
                headers: {
                    "X-fancyBx": !0
                }
            },
            iframe: {
                scrolling: "auto",
                preload: !0
            },
            keys: {
                next: {
                    13: "left",
                    34: "up",
                    39: "left",
                    40: "up"
                },
                prev: {
                    8: "right",
                    33: "down",
                    37: "right",
                    38: "down"
                },
                close: [27],
                play: [32],
                toggle: [70]
            },
            direction: {
                next: "left",
                prev: "right"
            },
            scrollOutside: !0,
            index: 0,
            type: null,
            href: null,
            content: null,
            title: null,
            tpl: {
                wrap: '<div class="fancybx-wrap" tabIndex="-1"><div class="fancybx-skin"><div class="fancybx-outer"><div class="fancybx-inner"></div></div></div></div>',
                image: '<img class="fancybx-image" src="{href}" alt="" />',
                iframe: '<iframe id="fancybx-frame{rnd}" name="fancybx-frame{rnd}" class="fancybx-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (r ? ' allowtransparency="true"' : "") + "></iframe>",
                error: '<p class="fancybx-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
                closeBtn: '<a title="Close" class="fancybx-item fancybx-close" href="javascript:;"></a>',
                next: '<a title="Next" class="fancybx-nav fancybx-next" href="javascript:;"><span></span></a>',
                prev: '<a title="Previous" class="fancybx-nav fancybx-prev" href="javascript:;"><span></span></a>',
                loading: '<div id="fancybx-loading"><div></div></div>'
            },
            openEffect: "fade",
            openSpeed: 250,
            openEasing: "swing",
            openOpacity: !0,
            openMethod: "zoomIn",
            closeEffect: "fade",
            closeSpeed: 250,
            closeEasing: "swing",
            closeOpacity: !0,
            closeMethod: "zoomOut",
            nextEffect: "fade",
            nextSpeed: 250,
            nextEasing: "swing",
            nextMethod: "changeIn",
            prevEffect: "fade",
            prevSpeed: 250,
            prevEasing: "swing",
            prevMethod: "changeOut",
            helpers: {
                overlay: !0,
                title: !0
            },
            onCancel: j.noop,
            beforeLoad: j.noop,
            afterLoad: j.noop,
            beforeShow: j.noop,
            afterShow: j.noop,
            beforeChange: j.noop,
            beforeClose: j.noop,
            afterClose: j.noop
        },
        group: {},
        opts: {},
        previous: null,
        coming: null,
        current: null,
        isActive: !1,
        isOpen: !1,
        isOpened: !1,
        wrap: null,
        skin: null,
        outer: null,
        inner: null,
        player: {
            timer: null,
            isActive: !1
        },
        ajaxLoad: null,
        imgPreload: null,
        transitions: {},
        helpers: {},
        open: function(c, p) {
            if (c && (j.isPlainObject(p) || (p = {}), !1 !== D.close(!0))) return Array.isArray(c) || (c = f(c) ? j(c).get() : [c]), j.each(c, function(e, t) {
                var n, i, o, a, r, l, s = {};
                "object" == typeof t && (t.nodeType && (t = j(t)), f(t) ? (s = {
                    href: t.data("fancybx-href") || t.attr("href"),
                    title: j("<div/>").text(t.data("fancybx-title") || t.attr("title") || "").html(),
                    isDom: !0,
                    element: t
                }, j.metadata && j.extend(!0, s, t.metadata())) : s = t), n = p.href || s.href || (h(t) ? t : null), i = p.title !== d ? p.title : s.title || "", !(a = (o = p.content || s.content) ? "html" : p.type || s.type) && s.isDom && (a = (a = t.data("fancybx-type")) || ((r = t.prop("class").match(/fancybx\.(\w+)/)) ? r[1] : null)), h(n) && (a || (D.isImage(n) ? a = "image" : "#" === n.charAt(0) ? a = "inline" : h(t) && (a = "html", o = t)), "ajax" === a && (n = (l = n.split(/\s+/, 2)).shift(), l = l.shift())), o || ("inline" === a ? n ? o = j(h(n) ? n.replace(/.*(?=#[^\s]+$)/, "") : n) : s.isDom && (o = t) : "html" === a ? o = n : a || n || !s.isDom || (a = "inline", o = t)), j.extend(s, {
                    href: n,
                    type: a,
                    content: o,
                    title: i,
                    selector: l
                }), c[e] = s
            }), D.opts = j.extend(!0, {}, D.defaults, p), p.keys !== d && (D.opts.keys = !!p.keys && j.extend({}, D.defaults.keys, p.keys)), D.group = c, D._start(D.opts.index)
        },
        cancel: function() {
            var e = D.coming;
            e && !1 === D.trigger("onCancel") || (D.hideLoading(), e && (D.ajaxLoad && D.ajaxLoad.abort(), D.ajaxLoad = null, D.imgPreload && (D.imgPreload.onload = D.imgPreload.onerror = null), e.wrap && e.wrap.stop(!0, !0).trigger("onReset").remove(), D.coming = null, D.current || D._afterZoomOut(e)))
        },
        close: function(e) {
            D.cancel(), !1 !== D.trigger("beforeClose") && (D.unbindEvents(), D.isActive && (D.isOpen && !0 !== e ? (D.isOpen = D.isOpened = !1, D.isClosing = !0, j(".fancybx-item, .fancybx-nav").remove(), D.wrap.stop(!0, !0).removeClass("fancybx-opened"), D.transitions[D.current.closeMethod]()) : (j(".fancybx-wrap").stop(!0).trigger("onReset").remove(), D._afterZoomOut())))
        },
        play: function(e) {
            function t() {
                clearTimeout(D.player.timer)
            }

            function n() {
                t(), D.current && D.player.isActive && (D.player.timer = setTimeout(D.next, D.current.playSpeed))
            }

            function i() {
                t(), c.off(".player"), D.player.isActive = !1, D.trigger("onPlayEnd")
            }!0 === e || !D.player.isActive && !1 !== e ? D.current && (D.current.loop || D.current.index < D.group.length - 1) && (D.player.isActive = !0, c.on({
                "onCancel.player beforeClose.player": i,
                "onUpdate.player": n,
                "beforeLoad.player": t
            }), n(), D.trigger("onPlayStart")) : i()
        },
        next: function(e) {
            var t = D.current;
            t && (h(e) || (e = t.direction.next), D.jumpto(t.index + 1, e, "next"))
        },
        prev: function(e) {
            var t = D.current;
            t && (h(e) || (e = t.direction.prev), D.jumpto(t.index - 1, e, "prev"))
        },
        jumpto: function(e, t, n) {
            var i = D.current;
            i && (e = A(e), D.direction = t || i.direction[e >= i.index ? "next" : "prev"], D.router = n || "jumpto", i.loop && (e < 0 && (e = i.group.length + e % i.group.length), e %= i.group.length), i.group[e] !== d && (D.cancel(), D._start(e)))
        },
        reposition: function(e, t) {
            var n = D.current,
                i = n ? n.wrap : null;
            i && (t = D._getPosition(t), e && "scroll" === e.type ? (delete t.position, i.stop(!0, !0).animate(t, 200)) : (i.css(t), n.pos = j.extend({}, n.dim, t)))
        },
        update: function(t) {
            var n = t && t.originalEvent && t.originalEvent.type,
                i = !n || "orientationchange" === n;
            i && (clearTimeout(l), l = null), D.isOpen && !l && (l = setTimeout(function() {
                var e = D.current;
                e && !D.isClosing && (D.wrap.removeClass("fancybx-tmp"), (i || "load" === n || "resize" === n && e.autoResize) && D._setDimension(), "scroll" === n && e.canShrink || D.reposition(t), D.trigger("onUpdate"), l = null)
            }, i && !p ? 0 : 300))
        },
        toggle: function(e) {
            D.isOpen && (D.current.fitToView = "boolean" == typeof e ? e : !D.current.fitToView, p && (D.wrap.removeAttr("style").addClass("fancybx-tmp"), D.trigger("onUpdate")), D.update())
        },
        hideLoading: function() {
            c.off(".loading"), j("#fancybx-loading").remove()
        },
        showLoading: function() {
            var e, t;
            D.hideLoading(), e = j(D.opts.tpl.loading).on("click", D.cancel).appendTo("body"), c.on("keydown.loading", function(e) {
                27 === (e.which || e.keyCode) && (e.preventDefault(), D.cancel())
            }), D.defaults.fixed || (t = D.getViewport(), e.css({
                position: "absolute",
                top: .5 * t.h + t.y,
                left: .5 * t.w + t.x
            })), D.trigger("onLoading")
        },
        getViewport: function() {
            var e = D.current && D.current.locked || !1,
                t = {
                    x: a.scrollLeft(),
                    y: a.scrollTop()
                };
            return e && e.length ? (t.w = e[0].clientWidth, t.h = e[0].clientHeight) : (t.w = p && n.innerWidth ? n.innerWidth : a.width(), t.h = p && n.innerHeight ? n.innerHeight : a.height()), t
        },
        unbindEvents: function() {
            D.wrap && f(D.wrap) && D.wrap.off(".fb"), c.off(".fb"), a.off(".fb")
        },
        bindEvents: function() {
            var t, s = D.current;
            s && (a.on("orientationchange.fb" + (p ? "" : " resize.fb") + (s.autoCenter && !s.locked ? " scroll.fb" : ""), D.update), (t = s.keys) && c.on("keydown.fb", function(n) {
                var i = n.which || n.keyCode,
                    e = n.target || n.srcElement;
                if (27 === i && D.coming) return !1;
                n.ctrlKey || n.altKey || n.shiftKey || n.metaKey || e && (e.type || j(e).is("[contenteditable]")) || j.each(t, function(e, t) {
                    return 1 < s.group.length && t[i] !== d ? (D[e](t[i]), n.preventDefault(), !1) : -1 < j.inArray(i, t) ? (D[e](), n.preventDefault(), !1) : void 0
                })
            }), j.fn.mousewheel && s.mouseWheel && D.wrap.on("mousewheel.fb", function(e, t, n, i) {
                for (var o, a = e.target || null, r = j(a), l = !1; r.length && !(l || r.is(".fancybx-skin") || r.is(".fancybx-wrap"));) l = (o = r[0]) && !(o.style.overflow && "hidden" === o.style.overflow) && (o.clientWidth && o.scrollWidth > o.clientWidth || o.clientHeight && o.scrollHeight > o.clientHeight), r = j(r).parent();
                0 === t || l || 1 < D.group.length && !s.canShrink && (0 < i || 0 < n ? D.prev(0 < i ? "down" : "left") : (i < 0 || n < 0) && D.next(i < 0 ? "up" : "right"), e.preventDefault())
            }))
        },
        trigger: function(n, e) {
            var t, i = e || D.coming || D.current;
            if (i) {
                if ("function" == typeof i[n] && (t = i[n].apply(i, Array.prototype.slice.call(arguments, 1))), !1 === t) return !1;
                i.helpers && j.each(i.helpers, function(e, t) {
                    t && D.helpers[e] && "function" == typeof D.helpers[e][n] && D.helpers[e][n](j.extend(!0, {}, D.helpers[e].defaults, t), i)
                })
            }
            c.trigger(n)
        },
        isImage: function(e) {
            return h(e) && e.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)
        },
        _start: function(e) {
            var t, n, i = {};
            if (e = A(e), !(n = D.group[e] || null)) return !1;
            if (t = (i = j.extend(!0, {}, D.opts, n)).margin, n = i.padding, "number" == typeof t && (i.margin = [t, t, t, t]), "number" == typeof n && (i.padding = [n, n, n, n]), i.modal && j.extend(!0, i, {
                    closeBtn: !1,
                    closeClick: !1,
                    nextClick: !1,
                    arrows: !1,
                    mouseWheel: !1,
                    keys: null,
                    helpers: {
                        overlay: {
                            closeClick: !1
                        }
                    }
                }), i.autoSize && (i.autoWidth = i.autoHeight = !0), "auto" === i.width && (i.autoWidth = !0), "auto" === i.height && (i.autoHeight = !0), i.group = D.group, i.index = e, D.coming = i, !1 !== D.trigger("beforeLoad")) {
                if (t = i.type, n = i.href, !t) return D.coming = null, !(!D.current || !D.router || "jumpto" === D.router) && (D.current.index = e, D[D.router](D.direction));
                if (D.isActive = !0, "image" === t && (i.autoHeight = i.autoWidth = !1, i.scrolling = "visible"), "image" === t && (i.aspectRatio = !0), "iframe" === t && p && (i.scrolling = "scroll"), i.wrap = j(i.tpl.wrap).addClass("fancybx-" + (p ? "mobile" : "desktop") + " fancybx-type-" + t + " fancybx-tmp " + i.wrapCSS).appendTo(i.parent || "body"), j.extend(i, {
                        skin: j(".fancybx-skin", i.wrap),
                        outer: j(".fancybx-outer", i.wrap),
                        inner: j(".fancybx-inner", i.wrap)
                    }), j.each(["Top", "Right", "Bottom", "Left"], function(e, t) {
                        i.skin.css("padding" + t, I(i.padding[e]))
                    }), D.trigger("onReady"), "inline" === t || "html" === t) {
                    if (!i.content || !i.content.length) return D._error("content")
                } else if (!n) return D._error("href");
                "image" === t ? D._loadImage() : "ajax" === t ? D._loadAjax() : "iframe" === t ? D._loadIframe() : D._afterLoad()
            } else D.coming = null
        },
        _error: function(e) {
            j.extend(D.coming, {
                type: "html",
                autoWidth: !0,
                autoHeight: !0,
                minWidth: 0,
                minHeight: 0,
                scrolling: "no",
                hasError: e,
                content: D.coming.tpl.error
            }), D._afterLoad()
        },
        _loadImage: function() {
            var e = D.imgPreload = new Image;
            e.onload = function() {
                this.onload = this.onerror = null, 0 == D.coming.forceWHSet && (D.coming.width = this.width / D.opts.pixelRatio, D.coming.height = this.height / D.opts.pixelRatio), D._afterLoad()
            }, e.onerror = function() {
                this.onload = this.onerror = null, D._error("image")
            }, e.src = D.coming.href, !0 !== e.complete && D.showLoading()
        },
        _loadAjax: function() {
            var n = D.coming;
            D.showLoading(), D.ajaxLoad = j.ajax(j.extend({}, n.ajax, {
                url: n.href,
                error: function(e, t) {
                    D.coming && "abort" !== t ? D._error("ajax", e) : D.hideLoading()
                },
                success: function(e, t) {
                    "success" === t && (n.content = e, D._afterLoad())
                }
            }))
        },
        _loadIframe: function() {
            var e = D.coming,
                t = j(e.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", p ? "auto" : e.iframe.scrolling).attr("src", e.href);
            j(e.wrap).on("onReset", function() {
                try {
                    j(this).find("iframe").hide().attr("src", "//about:blank").end().empty()
                } catch (e) {}
            }), e.iframe.preload && (D.showLoading(), t.one("load", function() {
                j(this).data("ready", 1), p || j(this).on("load.fb", D.update), j(this).parents(".fancybx-wrap").width("100%").removeClass("fancybx-tmp").show(), D._afterLoad()
            })), e.content = t.appendTo(e.inner), e.iframe.preload || D._afterLoad()
        },
        _preloadImages: function() {
            for (var e, t = D.group, n = D.current, i = t.length, o = n.preload ? Math.min(n.preload, i - 1) : 0, a = 1; a <= o; a += 1) "image" === (e = t[(n.index + a) % i]).type && e.href && ((new Image).src = e.href)
        },
        _afterLoad: function() {
            var e, t, n, i, o = D.coming,
                a = D.current,
                r = "fancybx-placeholder";
            if (D.hideLoading(), o && !1 !== D.isActive) {
                if (!1 === D.trigger("afterLoad", o, a)) return o.wrap.stop(!0).trigger("onReset").remove(), void(D.coming = null);
                switch (a && (D.trigger("beforeChange", a), a.wrap.stop(!0).removeClass("fancybx-opened").find(".fancybx-item, .fancybx-nav").remove()), D.unbindEvents(), t = (e = o).content, n = o.type, o = o.scrolling, j.extend(D, {
                    wrap: e.wrap,
                    skin: e.skin,
                    outer: e.outer,
                    inner: e.inner,
                    current: e,
                    previous: a
                }), i = e.href, n) {
                    case "inline":
                    case "ajax":
                    case "html":
                        e.selector ? t = j("<div>").html(t).find(e.selector) : f(t) && (t.data(r) || t.data(r, j('<div class="' + r + '"></div>').insertAfter(t).hide()), t = t.show().detach(), e.wrap.on("onReset", function() {
                            j(this).find(t).length && t.hide().replaceAll(t.data(r)).data(r, !1)
                        }));
                        break;
                    case "image":
                        t = e.tpl.image.replace(/\{href\}/g, i)
                }
                f(t) && t.parent().is(e.inner) || e.inner.append(t), D.trigger("beforeShow"), e.inner.css("overflow", "yes" === o ? "scroll" : "no" === o ? "hidden" : o), D._setDimension(), D.reposition(), D.isOpen = !1, D.coming = null, D.bindEvents(), D.isOpened ? a.prevMethod && D.transitions[a.prevMethod]() : j(".fancybx-wrap").not(e.wrap).stop(!0).trigger("onReset").remove(), D.transitions[D.isOpened ? e.nextMethod : e.openMethod](), D._preloadImages()
            }
        },
        _setDimension: function() {
            var e, t, n, i, o, a, r, l, s, c, p, d, f, h, u, g, y = D.getViewport(),
                m = 0,
                x = D.wrap,
                v = D.skin,
                w = D.inner,
                b = D.current,
                k = b.width,
                C = b.height,
                O = b.minWidth,
                W = b.minHeight,
                _ = b.maxWidth,
                S = b.maxHeight,
                T = b.scrolling,
                H = b.scrollOutside ? b.scrollbarWidth : 0,
                L = b.margin,
                E = A(L[1] + L[3]),
                P = A(L[0] + L[2]);
            if (x.add(v).add(w).width("auto").height("auto").removeClass("fancybx-tmp"), n = A(v.outerWidth(!0) - v.width()), parseInt(n / 2) != n / 2 && (n = 2 * (parseInt(n / 2) + 1)), o = E + n, a = P + (i = A(v.outerHeight(!0) - v.height())), r = M(k) ? (y.w - o) * A(k) / 100 : k, l = M(C) ? (y.h - a) * A(C) / 100 : C, "iframe" === b.type) {
                if (u = b.content, b.autoHeight && u && 1 === u.data("ready")) try {
                    u[0].contentWindow.document.location && (w.width(r).height(9999), g = u.contents().find("body"), H && g.css("overflow-x", "hidden"), l = g.outerHeight(!0))
                } catch (e) {}
            } else(b.autoWidth || b.autoHeight) && (w.addClass("fancybx-tmp"), b.autoWidth || w.width(r), b.autoHeight || w.height(l), b.autoWidth && (r = w.width()), b.autoHeight && (l = w.height()), w.removeClass("fancybx-tmp"));
            if (k = A(r), C = A(l), c = r / l, O = A(M(O) ? A(O, "w") - o : O), _ = A(M(_) ? A(_, "w") - o : _), W = A(M(W) ? A(W, "h") - a : W), s = _, L = S = A(M(S) ? A(S, "h") - a : S), b.fitToView && (_ = Math.min(y.w - o, _), S = Math.min(y.h - a, S)), f = y.w - E, h = y.h - P, b.aspectRatio ? (_ < k && (C = A((k = _) / c)), S < C && (k = A((C = S) * c)), k < O && (C = A((k = O) / c)), C < W && (k = A((C = W) * c))) : (k = Math.max(O, Math.min(k, _)), b.autoHeight && "iframe" !== b.type && (w.width(k), C = w.height()), C = Math.max(W, Math.min(C, S))), b.fitToView) {
                w.width(k).height(C);
                var R = 0;
                if (parseInt(n / 2) != n / 2 && (R = 1), x.width(k + n + R), p = x.width(), d = x.height(), b.aspectRatio)
                    for (;
                        (f < p || h < d) && O < k && W < C && !(19 < m++);) C = Math.max(W, Math.min(S, C - 10)), (k = A(C * c)) < O && (C = A((k = O) / c)), _ < k && (C = A((k = _) / c)), w.width(k).height(C), x.width(k + n + R), p = x.width(), d = x.height();
                else k = Math.max(O, Math.min(k, k - (p - f))), C = Math.max(W, Math.min(C, C - (d - h)))
            }
            H && "auto" === T && C < l && k + n + H < f && (k += H), w.width(k).height(C), x.width(k + n + R), p = x.width(), d = x.height(), e = (f < p || h < d) && O < k && W < C, t = b.aspectRatio ? k < s && C < L && k < r && C < l : (k < s || C < L) && (k < r || C < l), j.extend(b, {
                dim: {
                    width: I(p),
                    height: I(d)
                },
                origWidth: r,
                origHeight: l,
                canShrink: e,
                canExpand: t,
                wPadding: n,
                hPadding: i,
                wrapSpace: d - v.outerHeight(!0),
                skinSpace: v.height() - C
            }), !u && b.autoHeight && W < C && C < S && !t && w.height("auto")
        },
        _getPosition: function(e) {
            var t = D.current,
                n = D.getViewport(),
                i = t.margin,
                o = D.wrap.width() + i[1] + i[3],
                a = D.wrap.height() + i[0] + i[2],
                i = {
                    position: "absolute",
                    top: i[0],
                    left: i[3]
                };
            return t.autoCenter && t.fixed && !e && a <= n.h && o <= n.w ? i.position = "fixed" : t.locked || (i.top += n.y, i.left += n.x), i.top = I(Math.max(i.top, i.top + (n.h - a) * t.topRatio)), i.left = I(Math.max(i.left, i.left + (n.w - o) * t.leftRatio)), i
        },
        _afterZoomIn: function() {
            var t = D.current;
            t && (D.isOpen = D.isOpened = !0, D.wrap.css({
                overflow: "visible",
                opacity: "1"
            }).addClass("fancybx-opened").hide().show(0), D.update(), (t.closeClick || t.nextClick && 1 < D.group.length) && D.inner.css("cursor", "pointer").on("click.fb", function(e) {
                j(e.target).is("a") || j(e.target).parent().is("a") || (e.preventDefault(), D[t.closeClick ? "close" : "next"]())
            }), t.closeBtn && j(t.tpl.closeBtn).appendTo(D.skin).on("click.fb", function(e) {
                e.preventDefault(), D.close()
            }), t.arrows && 1 < D.group.length && ((t.loop || 0 < t.index) && j(t.tpl.prev).appendTo(D.outer).on("click.fb", D.prev), (t.loop || t.index < D.group.length - 1) && j(t.tpl.next).appendTo(D.outer).on("click.fb", D.next)), D.trigger("afterShow"), t.loop || t.index !== t.group.length - 1 ? D.opts.autoPlay && !D.player.isActive && (D.opts.autoPlay = !1, D.play(!0)) : D.play(!1))
        },
        _afterZoomOut: function(e) {
            e = e || D.current, j(".fancybx-wrap").trigger("onReset").remove(), j.extend(D, {
                group: {},
                opts: {},
                router: !1,
                current: null,
                isActive: !1,
                isOpened: !1,
                isOpen: !1,
                isClosing: !1,
                wrap: null,
                skin: null,
                outer: null,
                inner: null
            }), D.trigger("afterClose", e)
        }
    }), D.transitions = {
        getOrigPosition: function() {
            var e = D.current,
                t = e.element,
                n = e.orig,
                i = {},
                o = 50,
                a = 50,
                r = e.hPadding,
                l = e.wPadding,
                s = D.getViewport();
            return !n && e.isDom && t.is(":visible") && ((n = t.find("img:first")).length || (n = t)), f(n) ? (i = n.offset(), n.is("img") && (o = n.outerWidth(), a = n.outerHeight())) : (i.top = s.y + (s.h - a) * e.topRatio, i.left = s.x + (s.w - o) * e.leftRatio), "fixed" !== D.wrap.css("position") && !e.locked || (i.top -= s.y, i.left -= s.x), i = {
                top: I(i.top - r * e.topRatio),
                left: I(i.left - l * e.leftRatio),
                width: I(o + l),
                height: I(a + r)
            }
        },
        step: function(e, t) {
            var n = t.prop,
                i = D.current,
                o = i.wrapSpace,
                a = i.skinSpace;
            "width" !== n && "height" !== n || (t = t.end === t.start ? 1 : (e - t.start) / (t.end - t.start), D.isClosing && (t = 1 - t), i = e - ("width" === n ? i.wPadding : i.hPadding), D.skin[n](A("width" === n ? i : i - o * t)), D.inner[n](A("width" === n ? i : i - o * t - a * t)))
        },
        zoomIn: function() {
            var e = D.current,
                t = e.pos,
                n = e.openEffect,
                i = "elastic" === n,
                o = j.extend({
                    opacity: 1
                }, t);
            delete o.position, i ? (t = this.getOrigPosition(), e.openOpacity && (t.opacity = .1)) : "fade" === n && (t.opacity = .1), D.wrap.css(t).animate(o, {
                duration: "none" === n ? 0 : e.openSpeed,
                easing: e.openEasing,
                step: i ? this.step : null,
                complete: D._afterZoomIn
            })
        },
        zoomOut: function() {
            var e = D.current,
                t = e.closeEffect,
                n = "elastic" === t,
                i = {
                    opacity: .1
                };
            n && (i = this.getOrigPosition(), e.closeOpacity && (i.opacity = .1)), D.wrap.animate(i, {
                duration: "none" === t ? 0 : e.closeSpeed,
                easing: e.closeEasing,
                step: n ? this.step : null,
                complete: D._afterZoomOut
            })
        },
        changeIn: function() {
            var e, t = D.current,
                n = t.nextEffect,
                i = t.pos,
                o = {
                    opacity: 1
                },
                a = D.direction;
            i.opacity = .1, "elastic" === n && (e = "down" === a || "up" === a ? "top" : "left", "down" === a || "right" === a ? (i[e] = I(A(i[e]) - 200), o[e] = "+=200px") : (i[e] = I(A(i[e]) + 200), o[e] = "-=200px")), "none" === n ? D._afterZoomIn() : D.wrap.css(i).animate(o, {
                duration: t.nextSpeed,
                easing: t.nextEasing,
                complete: D._afterZoomIn
            })
        },
        changeOut: function() {
            var e = D.previous,
                t = e.prevEffect,
                n = {
                    opacity: .1
                },
                i = D.direction;
            "elastic" === t && (n["down" === i || "up" === i ? "top" : "left"] = ("up" === i || "left" === i ? "-" : "+") + "=200px"), e.wrap.animate(n, {
                duration: "none" === t ? 0 : e.prevSpeed,
                easing: e.prevEasing,
                complete: function() {
                    j(this).trigger("onReset").remove()
                }
            })
        }
    }, D.helpers.overlay = {
        defaults: {
            closeClick: !0,
            speedOut: 0,
            showEarly: !0,
            css: {},
            locked: !p,
            fixed: !0
        },
        overlay: null,
        fixed: !1,
        el: j("html"),
        create: function(e) {
            var t;
            e = j.extend({}, this.defaults, e), this.overlay && this.close(), t = (D.coming || e).parent, this.overlay = j('<div class="fancybx-overlay"></div>').appendTo(t && t.length ? t : "body"), this.fixed = !1, e.fixed && D.defaults.fixed && (this.overlay.addClass("fancybx-overlay-fixed"), this.fixed = !0)
        },
        open: function(e) {
            var t = this;
            e = j.extend({}, this.defaults, e), this.overlay ? this.overlay.off(".overlay").width("auto").height("auto") : this.create(e), this.fixed || (a.on("resize.overlay", j.proxy(this.update, this)), this.update()), e.closeClick && this.overlay.on("click.overlay", function(e) {
                if (j(e.target).hasClass("fancybx-overlay")) return (D.isActive ? D : t).close(), !1
            }), this.overlay.css(e.css).show()
        },
        close: function() {
            a.off("resize.overlay"), this.el.hasClass("fancybx-lock") && (j(".fancybx-margin").removeClass("fancybx-margin"), this.el.removeClass("fancybx-lock"), a.scrollTop(this.scrollV).scrollLeft(this.scrollH)), j(".fancybx-overlay").remove().hide(), j.extend(this, {
                overlay: null,
                fixed: !1
            })
        },
        update: function() {
            var e, t = "100%";
            this.overlay.width(t).height("100%"), r ? (e = Math.max(i.documentElement.offsetWidth, i.body.offsetWidth), c.width() > e && (t = c.width())) : c.width() > a.width() && (t = c.width()), this.overlay.width(t).height(c.height())
        },
        onReady: function(e, t) {
            var n = this.overlay;
            j(".fancybx-overlay").stop(!0, !0), n || this.create(e), e.locked && this.fixed && t.fixed && (t.locked = this.overlay.append(t.wrap), t.fixed = !1), !0 === e.showEarly && this.beforeShow.apply(this, arguments)
        },
        beforeShow: function(e, t) {
            t.locked && !this.el.hasClass("fancybx-lock") && (!1 !== this.fixPosition && j("*:not(object)").filter(function() {
                return "fixed" === j(this).css("position") && !j(this).hasClass("fancybx-overlay") && !j(this).hasClass("fancybx-wrap")
            }).addClass("fancybx-margin"), this.el.addClass("fancybx-margin"), this.scrollV = a.scrollTop(), this.scrollH = a.scrollLeft(), this.el.addClass("fancybx-lock"), a.scrollTop(this.scrollV).scrollLeft(this.scrollH)), this.open(e)
        },
        onUpdate: function() {
            this.fixed || this.update()
        },
        afterClose: function(e) {
            this.overlay && !D.coming && this.overlay.fadeOut(e.speedOut, j.proxy(this.close, this))
        }
    }, D.helpers.title = {
        defaults: {
            type: "float",
            position: "bottom"
        },
        beforeShow: function(e) {
            var t, n, i = D.current,
                o = i.title,
                a = e.type;
            if ("function" == typeof o && (o = o.call(i.element, i)), h(o) && "" !== o.trim()) {
                switch (t = j('<div class="fancybx-title fancybx-title-' + a + '-wrap">' + o + "</div>"), a) {
                    case "inside":
                        n = D.skin;
                        break;
                    case "outside":
                        n = D.wrap;
                        break;
                    case "over":
                        n = D.inner;
                        break;
                    default:
                        n = D.skin, t.appendTo("body"), r && t.width(t.width()), t.wrapInner('<span class="child"></span>'), D.current.margin[2] += Math.abs(A(t.css("margin-bottom")))
                }
                t["top" === e.position ? "prependTo" : "appendTo"](n)
            }
        }
    }, j.fn.fancybx = function(a) {
        function e(e) {
            var t, n, i = j(this).trigger("blur"),
                o = s;
            e.ctrlKey || e.altKey || e.shiftKey || e.metaKey || i.is(".fancybx-wrap") || (t = a.groupAttr || "data-fancybx-group", (n = i.attr(t)) || (t = "rel", n = i.get(0)[t]), n && "" !== n && "nofollow" !== n && (o = (i = (i = l.length ? j(l) : r).filter("[" + t + '="' + n + '"]')).index(this)), a.index = o, !1 !== D.open(i, a) && e.preventDefault())
        }
        var r = j(this),
            l = this.selector || "",
            s = (a = a || {}).index || 0;
        return l && !1 !== a.live ? c.off("click.fb-start", l).on("click.fb-start", l + ":not('.fancybx-item, .fancybx-nav')", e) : r.off("click.fb-start").on("click.fb-start", e), this.filter("[data-fancybx-start=1]").trigger("click"), this
    }, c.ready(function() {
        var e, t;
        j.scrollbarWidth === d && (j.scrollbarWidth = function() {
            var e = j('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),
                t = e.children(),
                t = t.innerWidth() - t.height(99).innerWidth();
            return e.remove(), t
        }), j.support.fixedPosition === d && (j.support.fixedPosition = (e = j('<div style="position:fixed;top:20px;"></div>').appendTo("body"), t = 20 === e[0].offsetTop || 15 === e[0].offsetTop, e.remove(), t)), j.extend(D.defaults, {
            scrollbarWidth: j.scrollbarWidth(),
            fixed: j.support.fixedPosition,
            parent: j("body")
        }), e = j(n).width(), o.addClass("fancybx-lock-test"), t = j(n).width(), o.removeClass("fancybx-lock-test"), j("<style type='text/css'>.fancybx-margin{margin-right:" + (t - e) + "px;}</style>").appendTo("head")
    })
}(window, document, jQuery);
/*
 * Media helper for fancybx
 * version: 1.0.6 (Fri, 14 Jun 2013)
 */

! function(p) {
    "use strict";
    p.fancybx.helpers.media = {
        defaults: {
            youtube: {
                matcher: /(youtube\.com|youtu\.be|youtube-nocookie\.com)\/(watch\?v=|v\/|u\/|embed\/?)?(videoseries\?list=(.*)|[\w-]{11}|\?listType=(.*)&list=(.*)).*/i,
                params: {
                    autoplay: 1,
                    autohide: 1,
                    fs: 1,
                    rel: 0,
                    hd: 1,
                    wmode: "opaque",
                    enablejsapi: 1,
                    ps: "docs",
                    controls: 1
                },
                type: "iframe",
                url: "//www.youtube.com/embed/$3"
            },
            vimeo: {
                matcher: /(?:vimeo(?:pro)?.com)\/(?:[^\d]+)?(\d+)(?:.*)/,
                params: {
                    autoplay: 1,
                    hd: 1,
                    show_title: 1,
                    show_byline: 1,
                    show_portrait: 0,
                    fullscreen: 1
                },
                type: "iframe",
                url: "//player.vimeo.com/video/$1"
            },
            dailymotion: {
                matcher: /dailymotion.com\/video\/(.*)\/?(.*)/,
                params: {
                    autoplay: 1,
                    additionalInfos: 0,
                    autoStart: 1
                },
                type: "iframe",
                url: "//www.dailymotion.com/embed/video/$1"
            },
            twitvid: {
                matcher: /twitvid\.com\/([a-zA-Z0-9_\-\?\=]+)/i,
                params: {
                    autoplay: 0
                },
                type: "iframe",
                url: "//www.twitvid.com/embed.php?guid=$1"
            },
            twitpic: {
                matcher: /twitpic\.com\/(?!(?:place|photos|events)\/)([a-zA-Z0-9\?\=\-]+)/i,
                type: "image",
                url: "//twitpic.com/show/full/$1/"
            },
            instagram: {
                matcher: /(instagr\.am|instagram\.com)\/p\/([a-zA-Z0-9_\-]+)\/?/i,
                type: "image",
                url: "//$1/p/$2/media/?size=l"
            },
            google_maps: {
                matcher: /maps\.google\.([a-z]{2,3}(\.[a-z]{2})?)\/(\?ll=|maps\?)(.*)/i,
                type: "iframe",
                url: function(e) {
                    return "//maps.google." + e[1] + "/" + e[3] + e[4] + "&output=" + (0 < e[4].indexOf("layer=c") ? "svembed" : "embed")
                }
            }
        },
        beforeLoad: function(e, t) {
            var a, o, i, r, m = t.href || "",
                l = !1;
            for (a in e)
                if (e.hasOwnProperty(a) && (o = e[a], i = m.match(o.matcher))) {
                    l = o.type, r = p.extend(!0, {}, o.params, t[a] || (p.isPlainObject(e[a]) ? e[a].params : null)), m = "function" == typeof o.url ? o.url.call(this, i, r, t) : function(a, e, t) {
                        return "object" == typeof(t = t || "") && (t = p.param(t, !0)), p.each(e, function(e, t) {
                            a = a.replace("$" + e, t || "")
                        }), t.length && (a += (0 < a.indexOf("?") ? "&" : "?") + t), a
                    }(o.url, i, r);
                    break
                }
            l && (t.href = m, t.type = l, t.autoHeight = !1)
        }
    }
}(jQuery);


/*!
 * Thumbnail helper for fancybx
 * version: 1.0.7 (Mon, 01 Oct 2012)
 */

! function(a) {
    var b = a.fancybx;
    b.helpers.thumbs = {
        defaults: {
            width: 50,
            height: 50,
            position: "bottom",
            source: function(b) {
                var c;
                return b.element && (c = a(b.element).find("img").attr("src")), !c && "image" === b.type && b.href && (c = b.href), c
            }
        },
        wrap: null,
        list: null,
        width: 0,
        init: function(b, c) {
            var e, d = this,
                f = b.width,
                g = b.height,
                h = b.source;
            e = "";
            for (var i = 0; i < c.group.length; i++) e += '<li><a style="width:' + f + "px;height:" + g + 'px;" href="javascript:jQuery.fancybx.jumpto(' + i + ');"></a></li>';
            this.wrap = a('<div id="fancybx-thumbs"></div>').addClass(b.position).appendTo("body"), this.list = a("<ul>" + e + "</ul>").appendTo(this.wrap), a.each(c.group, function(b) {
                var e = c.group[b],
                    i = h(e);
                i && a("<img />").on("load", function() {
                    var h, i, j, c = this.width,
                        e = this.height;
                    d.list && c && e && (c < f && e <= g && (c = f), e < g && c <= f && (e = g), h = c / f, i = e / g, j = d.list.children().eq(b).find("a"), h >= 1 && i >= 1 && (h > i ? (c = Math.floor(c / i), e = g) : (c = f, e = Math.floor(e / h))), a(this).css({
                        width: c,
                        height: e,
                        top: Math.floor(g / 2 - e / 2),
                        left: Math.floor(f / 2 - c / 2)
                    }), j.width(f).height(g), a(this).hide().appendTo(j).fadeIn(300))
                }).attr("src", i).attr("title", e.title)
            }), this.width = this.list.children().eq(0).outerWidth(!0), this.list.width(this.width * (c.group.length + 1)).css("left", Math.floor(.5 * a(window).width() - (c.index * this.width + .5 * this.width)))
        },
        beforeLoad: function(a, b) {
            return b.group.length < 2 ? void(b.helpers.thumbs = !1) : void(b.margin["top" === a.position ? 0 : 2] += a.height + 15)
        },
        afterShow: function(a, b) {
            this.list ? this.onUpdate(a, b) : this.init(a, b), this.list.children().removeClass("active").eq(b.index).addClass("active")
        },
        onUpdate: function(b, c) {
            this.list && this.list.stop(!0).animate({
                left: Math.floor(.5 * a(window).width() - (c.index * this.width + .5 * this.width))
            }, 150)
        },
        beforeClose: function() {
            this.wrap && this.wrap.remove(), this.wrap = null, this.list = null, this.width = 0
        }
    }
}(jQuery);